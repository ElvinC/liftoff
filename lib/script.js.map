{"version":3,"sources":["../src/script.js"],"names":["window","requestAnimFrame","animationFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","nextFrameCallback","cb","setTimeout","spriteList","scene","glider","draw","clear","i","length","drawSprite","simulateFrame","cameraSmooth","Math","min","vel","Delta","Vec","sub","pos","camera","addInPlace","multiply","$","html","round","y","init","Scene","zoom","randX","random","randY","newBall","Circle","push","radP","planet","Rocket","Vec2","bind","e","changeAmount","originalEvent","wheelDelta","ready"],"mappings":"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","sourcesContent":["import { Vector2D as Vec2, Vector as Vec } from './vector';\nimport { Scene } from './scene';\nimport { Circle, Rocket } from './shapes';\n\n// one function for requesting animation frame\nwindow.requestAnimFrame = ((function animationFrame(/* callback */) {\n    return window.requestAnimationFrame\n    || window.webkitRequestAnimationFrame\n    || window.mozRequestAnimationFrame\n    || window.oRequestAnimationFrame\n    || window.msRequestAnimationFrame\n    || function nextFrameCallback(cb) {\n        window.setTimeout(cb, 1000 / 60);\n    };\n})());\n\n/*\nfunction simulateObjects(objList) {\n    for (let i = 0; i < objList.length; i++) {\n        objList[i].simulateFrame();\n    }\n}\n\nfunction drawObjects(objList, context) {\n    for (let i = 0; i < objList.length; i++) {\n        objList[i].drawMe(context);\n    }\n}\n*/\n\nconst spriteList = [];\n\nlet scene = null;\nlet glider = null;\n// const floor = null;\n\n\nfunction draw() {\n    scene.clear();\n\n    for (let i = 0; i < spriteList.length; i++) {\n        scene.drawSprite(spriteList[i]);\n        spriteList[i].simulateFrame();\n    }\n\n    // move camera towards player\n    const cameraSmooth = Math.min(0.04 + glider.vel.length() / 600, 1);\n    const Delta = Vec.sub(glider.pos, scene.camera.pos);\n    scene.camera.pos.addInPlace(Delta.multiply(cameraSmooth));\n\n    // move 'ground' to player's x-coordinates\n    // floor.pos.x = glider.pos.x;\n    $('#speed').html(Math.round(glider.vel.length()));\n    $('#altitude').html(Math.round(600 - glider.pos.y));\n\n    window.requestAnimFrame(draw);\n}\n\nfunction init() {\n    scene = new Scene('canvas');\n    window.scene = scene;\n    scene.camera.zoom = 0.8;\n    // scene.camera.pos.set(0, -1000);\n\n    for (let i = 0; i < 300; i++) {\n        const randX = 20000 * (Math.random() - 0.5);\n        const randY = 15000 * (Math.random() - 1);\n        const newBall = new Circle(randX, randY, 10, '#0066ff');\n        spriteList.push(newBall);\n    }\n\n    const radP = 1000;\n    const planet = new Circle(0, radP + 600, radP, '#00ff00');\n    spriteList.push(planet);\n\n    glider = new Rocket(new Vec2(0, 0), new Vec2(0, 0), 1, 0);\n    spriteList.push(glider);\n\n    // floor = new Rectangle(0, 620, 10000, 20, 0, '#333333', 0, 0);\n    // spriteList.push(floor);\n\n\n    $(window).bind('mousewheel', (e) => {\n        // console.log(e.originalEvent.wheelDelta)\n        const changeAmount = Math.min(0.01, 1 + e.originalEvent.wheelDelta / 1000);\n        scene.camera.zoom *= changeAmount;\n    });\n\n\n    window.requestAnimFrame(draw);\n}\n\n\n$(window).ready(() => {\n    init();\n});\n"],"file":"script.js"}